<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width-device-width, initial-scale-1.0">
    <title>Responsive site : HTML</title>
    <link rel="stylesheet" href="./style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">


  </head>
  <body>
    <header>


      <div class="logo-container">
        <img src="img/logo.png" alt="logo">
        <h4>lakru-creations</h4>
      </div>
      <input type="checkbox" id="check">
      <label for="check" class="checkbtn">
        <i class="fa fa-bars"></i>
      </label>
      <nav>
        <ul>
          <li class="hov"> <a class="nav-link" href="#" >Specs</a> </li>
          <li class="hov"> <a class="nav-link" href="#">About</a> </li>
          <li class="hov"> <a class="nav-link" href="#">Login</a> </li>
        </ul>
      </nav>

    </header>


      <section class="add_product">

        <form class="" action="/add_new" method="post" enctype="multipart/form-data">

          <input type="text" name="product_name"  placeholder="product name">

          <div class="image-preview" id="image-preview">
            <img src="" alt="Image Preview" class="ip-image">
            <span class="ip-default-text">Image Preview</span>
          </div>

        <div id="dropFileForm" >
          <input type="file" name="file" id="fileInput" onchange="addFiles(event)">
          <label for="fileInput" id="fileLabel"
          ondragover="overrideDefault(event);fileHover();"
          ondragenter="overrideDefault(event); fileHover();"
          ondragleave="overrideDefault(event); fileHoverEnd();"
          ondrop="overrideDefault(event); fileHoverEnd(); addFiles(event)">
            <i class="fa fa-download fa-5x"></i>
            <br>
            <span id="fileLabelText">
              click to choose a file or drag it here
            </span>
          </label>
        </div>


        <button type="submit" name="button" class="save-btn"> save product</button>

      </form>

      </section>




    <div class="copyright">
      <hr>
      <p class="copyright">Copyright &copy Lakru-one. Built in corona vaccation 2020</p>
    </div>




<!-- scrypt -->
<script>


///////////////////////////drop files/////////////////////////////////////
var dropFileForm = document.getElementById('dropFileForm');
var fileLabelText = document.getElementById('fileLabelText');

const previewContainer = document.getElementById('image-preview');
const previewImage = previewContainer.querySelector('.ip-image');
const previewDefaultText = previewContainer.querySelector('.ip-default-text');

var droppedFiles;

function overrideDefault(event){
  // console.log("Hi there");
  event.preventDefault();
  event.stopPropagation();
}

function fileHover(){
  dropFileForm.classList.add("fileHover");
}

function fileHoverEnd(){
  dropFileForm.classList.remove("fileHover");
}

function addFiles(event){
  droppedFiles = event.target.files || event.dataTransfer.files;
  showFiles(droppedFiles);
}

function showFiles(files){
  if(files.length>0){

    if (files.length>1) {
      // console.log(files);
      // fileLabelText.innerText = files.length + 'files selected';
      fileLabelText.innerText = 'Please select only one image';
      files =null;
      // console.log(files);
      previewDefaultText.style.display = null;
      previewImage.style.display = null;
      previewImage.setAttribute("src", '');


    }else {
      console.log(files);
      fileLabelText.innerText = files[0].name;
      const file = files[0];
      /////////////////////////////////
      const reader = new FileReader();
      previewDefaultText.style.display = "none";
      previewImage.style.display ="block";

      reader.addEventListener("load", function(){
        // console.log(this);
        previewImage.setAttribute("src",this.result);
      });
      reader.readAsDataURL(file);

      /////////////////////////////
    }

  }else{
    previewDefaultText.style.display = null;
    previewImage.style.display = null;
    previewImage.setAttribute("src", '');

    fileLabelText.innerText = 'click to choose a file or drag it here';

 }
}



//////////////////////////choose files///////////////////////////////////////

// const imgFile = document.getElementById('imgFile');
// const previewContainer = document.getElementById('image-preview');
// const previewImage = previewContainer.querySelector('.ip-image');
// const previewDefaultText = previewContainer.querySelector('.ip-default-text');
//
//
// imgFile.addEventListener("change", function(){
//   const file = this.files[0];
//   // console.log(file);
//
//   if (file) {
//     const reader = new FileReader();
//     previewDefaultText.style.display = "none";
//     previewImage.style.display ="block";
//
//     reader.addEventListener("load", function(){
//       // console.log(this);
//       previewImage.setAttribute("src",this.result);
//     });
//     reader.readAsDataURL(file);
//   }else{
//     // console.log("inside else");
//     previewDefaultText.style.display = null;
//     previewImage.style.display = null;
//     previewImage.setAttribute("src", '');
//   }
//
//
// });


</script>

  </body>
</html>
